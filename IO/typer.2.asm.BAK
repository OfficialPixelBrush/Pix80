; I/O Device 0 is LCD Instructions (RS = 0)
; I/O Device 1 is LCD Data         (RS = 1)
; I/O Device 2 is Keyboard

; Set DDRAM Address
LD A,0b10000000
OUT (0),A

; Print Character
LD A,0
OUT (1),A 
   
; IX used as pointer
LD IX,0
writeHelloWorld:
; hello offset + pointer
LD A,(IX+hello)
; output on data bus to LCD
OUT (1),A
; increment IX
INC IX
CP 0
JP NZ,writeHelloWorld 

keyboard:
IN A,(2)
; put PS/2 to ASCII Processing here v
CP 8
CALL Z,backspace
CP 32 ; if the Character is within printable ASCII
JP C, keyboard
OUT (1),A ; then print the character
JP keyboard

backspace:
PUSH AF
; clear char
LD A, 0b00010000
OUT (0),A ; reverse printing direction to r-l

LD A, 32
OUT (1),A ; print space

; clear char
LD A, 0b00010000
OUT (0),A ; reverse printing direction to r-l

POP AF
RET


; LCD Printing handling
;INC E ; increase Display Position
; insert handling of lines here
;LD A,0b10000000
;ADD A,E ; Set display Address 
;OUT (0),A   ; Output on Data Bus
JP keyboard  ; return to keyboard loop

hello:
    DEFM  " Hello, world! ",0

panda:
    ;INCLUDE "redPanda.bin"
